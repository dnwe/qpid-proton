<!--
 * <copyright
 * notice="lm-source-program"
 * pids="5725-P60"
 * years="2013,2015"
 * crc="3568777996" >
 * Licensed Materials - Property of IBM
 *
 * 5725-P60
 *
 * (C) Copyright IBM Corp. 2015
 *
 * US Government Users Restricted Rights - Use, duplication or
 * disclosure restricted by GSA ADP Schedule Contract with
 * IBM Corp.
 * </copyright>
-->
<html>
 <head>
  <title>MQ Light Java API</title>
 </head>
 <body>
  <h2>Non-blocking API</h2>
  Example code for using the non-blocking client to send a message
  <pre>
  NonBlockingClient.create("amqps://localhost", new NonBlockingClientAdapter() {
      public void onStarted(NonBlockingClient client, Object context) {
          client.send("/kittens", "Hello kitty!");
          client.stop(true, null, null);
      }
  }, null);
  </pre>
  <p>

  Example code for receiving messages published to the '/kittens' topic.
  <pre>
  NonBlockingClient client = NonBlockingClient.create("amqps://localhost", null, null);
      client.subscribe("/kittens", new DestinationAdapter() {
      public void onMessage(NonBlockingClient client, Object context, Delivery delivery) {
          switch (delivery.getType()) {
          case BYTES:
              BytesDelivery bd = (BytesDelivery)delivery;
              System.out.println(bd.getData());
              break;
          case STRING:
              StringDelivery sd = (StringDelivery)delivery;
              System.out.println(sd.getData());
              break;
          }
      }
  }, null, null);
  </pre>
  
  State machine that underpins the client:<br>
  <img src="doc-files/sm.gif">
  <p>
  <h2>Getting started</h2>
  The client depends on the following jar files (and has been built and tested using the indicated versions):
  <table width="50%" border="1">
    <tr><th>Dependency</th><th>Version</th></tr>
    <tr><td>Google Gson</td><td>2.2.4</td></tr>
    <tr><td>Logback Classic</td><td>1.1.2</td></tr>
    <tr><td>Logback Core</td><td>1.1.2</td></tr>
    <tr><td>Apache Netty</td><td>4.0.21.Final</td></tr>
    <tr><td>SLF4J</td><td>1.7.5</td></tr>
    <tr><td>Stateless4J</td><td>2.5.0</td></tr>
  </table>
  <p>
  The client also includes a <code>pom.xml</code> that can be used to install it into a Maven repository and automatically
  resolve these dependencies.  For example:
  <pre>
  mvn install:install-file -Dfile=mqlight-api-1.0-SNAPSHOT.jar -DpomFile=pom.xml
  mvn dependency:get -Dartifact=com.ibm.mqlight.api:mqlight-api:1.0-SNAPSHOT
  </pre>

  <h2>Some notes on logging</h2>
  The client logs using the SLF4J interfaces.  If it is used in a runtime where an implementation
  of SLF4J has already been started, then it will use this for logging.  If it is used in a runtime
  where Logback is used to implement SLF4J and the LogManager has not been started then it will
  configure Logback itself.  Currently this involves enabling WARN and above logging unless the
  MQLIGHT_JAVA_LOG environment variable is set (to any value) in which case DEBUG and above
  logging is enabled using Logback's BasicConfigurator.
  
 </body>
</html>